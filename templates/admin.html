<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Admin</title>
    <link rel="stylesheet" href="{{url_for('static', filename='css/admin.css')}}">
    <style>
    /* Quản lý đơn hàng*/
    .order-dropdown {
        position: relative;
        display: inline-block;
    }

    .order-dropdown .order-menu {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 6px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        z-index: 999;
        min-width: 220px;
        padding: 10px 0;
    }

    .order-dropdown:hover .order-menu {
        display: block;
    }

    .order-dropdown .menu-title {
        font-weight: bold;
        padding: 8px 16px;
        border-bottom: 1px solid #eee;
        color: #333;
    }

    .order-dropdown .order-menu a {
        display: block;
        padding: 10px 16px;
        color: #333;
        text-decoration: none;
        transition: background-color 0.2s;
    }

    .order-dropdown .order-menu a:hover {
        background-color: #e10e0e;
    }
    </style>
</head>

<body>

    <!-- bar điều hướng, có ở tất cả các trang-->
    {% include 'MenuBar.html' %}

    <!-- bieu tuong (cho dep) -->
    <div class="star_gif" >
        <img src="{{ url_for('static', filename='used/star.png') }}">
    </div>
    <div class="sep">
        <div class="column">
            <button class="product-btn active">Chỉnh sửa sản phẩm</button>
        </div>
        <div class="column">
            <button class="user-btn">Chỉnh sửa người dùng</button>
        </div>

        <div class="column order-dropdown">
            <button class="user-btn">Quản lý đơn hàng ▾</button>
            <div class="order-menu">
                <div class="menu-title">Theo trạng thái đơn</div>
                <a href="/quanlydonhang_Choxacnhandon">Chờ xác nhận đơn</a>
                <a href="/quanlydonhang_Danggiaohang">Đang giao hàng</a>
                <a href="/quanlydonhang_Chobanxacnhan">Chờ bạn xác nhận</a>
                <a href="/quanlydonhang_Dagiaothanhcong">Đã giao thành công</a>
            </div>
        </div>

        <div class="column">
            <a href="/admin/revenue" class="user-btn">Doanh thu</a>
        </div>
    </div>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/Product-table.css') }}">

    <div class="product-tab">
        {% if not products %}
        <div class="no-product">
            <img src="{{ url_for('static', filename='used/no-product.png') }}" alt="No product">
            <h1>Không có sản phẩm nào hiện trong kho</h1>
            <h2> Hoặc chưa kết nối được tới cơ sở dữ liệu</h2>
        </div>
        {% else %}
        <table class="product-table" id="product-table">
            <tbody></tbody>
        </table>

        <template id="product-template">
            <td>
                <div class="product">
                    <div><img class="main" src=""></div>
                    <div class="name"></div>
                    <div class="price"></div>
                    <div class="add_info">
                        <div class="material"></div>
                        <div class="discount"></div>
                    </div>
                </div>
                <button class="hidden overlay">
                    <img src="{{ url_for('static', filename='used/edit.png') }}" alt="Edit product">
                </button>
            </td>
        </template>
        {% endif %}

        <div id="popupEdit" class="hidden popup">
            <div class="popup-content">
                <span id="close-popup" class="close-popup">×</span>
                <form id="edit-form" class="product-form">
                    <!-- đã chèn js tạo bảng -->
                </form>
            </div>
        </div>
        <div id="popupAdd" class="hidden popup">
            <div class="popup-content">
                <span id="close-popup2" class="close-popup">×</span>
                <form id="add-form" class="product-form">
                    <!-- đã chèn js tạo bảng -->
                </form>
            </div>
        </div>
    </div>

    <div class="user-tab" style="display:none; padding-top:10px;">
        {% if not users %}
        <div class="no-user">
            <img src="{{ url_for('static', filename='used/error-database.png') }}" alt="No user">
            <h1>Chưa có người dùng nào trong cơ sở dữ liệu</h1>
            <h2> Hoặc chưa kết nối được tới cơ sở dữ liệu</h2>
        </div>
        {% else %}
        <table class="user-table" id="user-table">
            <thead>
            <tr>
                <th> Mã khách hàng </th>
                <th>Họ và tên</th>
                <th>Username</th>
                <th>Số điện thoại</th>
                <th>Địa chỉ giao hàng</th>
                <th> Chỉnh sửa </th>
                <th> Xóa </th>
            </tr>
            </thead>

            <tbody></tbody>
        </table>

        <template id="user-template">
            <tr class="user">
                <td><div class="stt"></div></td>
                <td><div class="name"></div></td>
                <td><div class="username"></div></td>
                <td><div class="sdt"></div></td>
                <td><div class="address"></div></td>
                <td><button class="edit-user">
                    <img src="{{ url_for('static', filename='used/edit.png') }}" alt="Edit user">
                </button></td>
                <td><button class="delete-user">×</button></td>
            </tr>
        </template>
        <div id="popupEditUser" class="hidden popup">
            <div class="popup-content">
                <span id="close-popup3" class="close-popup">×</span>
                <form id="edit-form2" class="user-form">
                    <!-- đã chèn js tạo bảng -->
                </form>
            </div>
        </div>
        {% endif %}
    </div>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/pagination.css') }}">
    <div class="pagination" id="pagination"></div>
    <script>
        window.productsData = {{ products|tojson }};
        window.usersData = {{ users|tojson }};
    </script>
    <script src="{{ url_for('static', filename='js/admin-page-popup-form.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin-page-pagination.js') }}"></script>

</body>
</html>