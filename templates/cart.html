<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Giỏ hàng</title>
    <style>
        .cart-table {
            width: 60%;
            margin: auto;
            border-collapse: collapse;
            border: none;
        }
        .cart-table th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }
        .actions { text-align: center; margin-top: 20px; }

    </style>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    {% include 'MenuBar.html' %}
    <h4 style="padding-left: 195px">Giỏ hàng của bạn</h4>
    {% if cart_items %}
    <table class="cart-table">
        <tr>
            <th>Tên sản phẩm</th>
            <th>Giá</th>
            <th>Số lượng</th>
            <th>Thành tiền</th>
            <th>Hành động</th>
        </tr>
        {% for item in cart_items %}
        {% set dis_price = item.Gia * (100 - item.Discount) / 100 %}
        <tr>
            <td>{{ item.TenSP }}</td>
            <td><s>{{ item.Gia|int }}₫</s> {{ dis_price|int }}₫</td>
            <td>{{ item.SoLuong }}</td>
            <td>{{ (dis_price * item.SoLuong)|int }}₫</td>
            <td><a href="{{ url_for('cart_bp.remove_from_cart', product_id=item.id) }}">Xóa</a></td>
        </tr>
        {% endfor %}
    </table>

    <div class="actions">
        <h3>Tổng cộng: {{ total_price }}₫</h3>
        <a href="{{ url_for('cart_bp.clear_cart') }}">Xóa toàn bộ</a>
    </div>
    {% else %}
    <p style="text-align:center;">Giỏ hàng trống.</p>
    {% endif %}
</body>
</html>

